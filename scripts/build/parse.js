import { marked } from "marked";
import katex from "marked-katex-extension";
import parseMeta from "parse-md";
marked.use({ breaks: true });
marked.use(katex());
export function parse(markdown) {
    markdown = markdown.replace(/^[\u200B\u200C\u200D\u200E\u200F\uFEFF]/, "");
    const { content, metadata: rawMetadata } = parseMeta(markdown);
    const parsed = marked.parse(content);
    const metadata = {
        title: rawMetadata.title ?? parsed.match(/<h1>(.*)<\/h1>/)?.[1],
        order: (rawMetadata.order) ? parseInt(rawMetadata.order) : undefined,
        type: rawMetadata.type,
        dirTree: rawMetadata.dirTree !== undefined,
    };
    return { parsed, metadata };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyc2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvcGFyc2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUNoQyxPQUFPLEtBQUssTUFBTSx3QkFBd0IsQ0FBQztBQUMzQyxPQUFPLFNBQVMsTUFBTSxVQUFVLENBQUM7QUFVakMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQzdCLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztBQUVwQixNQUFNLFVBQVUsS0FBSyxDQUFDLFFBQWdCO0lBS2xDLFFBQVEsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUN2Qix5Q0FBeUMsRUFBRSxFQUFFLENBQ2hELENBQUM7SUFDRixNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsR0FBRyxTQUFTLENBQUMsUUFBUSxDQUEwRCxDQUFDO0lBQ3hILE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFXLENBQUM7SUFHL0MsTUFBTSxRQUFRLEdBQWE7UUFDdkIsS0FBSyxFQUFFLFdBQVcsQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQy9ELEtBQUssRUFBRSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUztRQUNwRSxJQUFJLEVBQUUsV0FBVyxDQUFDLElBQTRCO1FBQzlDLE9BQU8sRUFBRSxXQUFXLENBQUMsT0FBTyxLQUFLLFNBQVM7S0FDN0MsQ0FBQztJQUVGLE9BQU8sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLENBQUM7QUFDaEMsQ0FBQyJ9